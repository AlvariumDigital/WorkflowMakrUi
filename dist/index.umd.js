!function(n,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports):"function"==typeof define&&define.amd?define(["exports"],o):o((n="undefined"!=typeof globalThis?globalThis:n||self).workflowmakr={})}(this,(function(n){"use strict";var o=[],t=[];!function(n,e){if(n&&"undefined"!=typeof document){var r,i=!0===e.prepend?"prepend":"append",a=!0===e.singleTag,l="string"==typeof e.container?document.querySelector(e.container):document.getElementsByTagName("head")[0];if(a){var s=o.indexOf(l);-1===s&&(s=o.push(l)-1,t[s]={}),r=t[s]&&t[s][i]?t[s][i]:t[s][i]=d()}else r=d();65279===n.charCodeAt(0)&&(n=n.substring(1)),r.styleSheet?r.styleSheet.cssText+=n:r.appendChild(document.createTextNode(n))}function d(){var n=document.createElement("style");if(n.setAttribute("type","text/css"),e.attributes)for(var o=Object.keys(e.attributes),t=0;t<o.length;t++)n.setAttribute(o[t],e.attributes[o[t]]);var r="prepend"===i?"afterbegin":"beforeend";return l.insertAdjacentElement(r,n),n}}("@import url(\"https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700;900&display=swap\");\n#workflow-makr-chart-container {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  background-color: #efefef;\n  overflow: auto;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start; }\n\n* {\n  margin: 0;\n  padding: 0; }\n\nbody {\n  background: #22659c; }\n\n.workflow-makr-org {\n  display: flex;\n  justify-content: center;\n  font-family: 'Lato', sans-serif; }\n  .workflow-makr-org ul {\n    padding-top: 20px;\n    position: relative;\n    transition: all 0.5s; }\n    .workflow-makr-org ul ul::before {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 50%;\n      border-left: 1px solid #ccc;\n      width: 50%;\n      height: 20px; }\n  .workflow-makr-org li {\n    float: left;\n    text-align: center;\n    list-style-type: none;\n    position: relative;\n    padding: 20px 10px;\n    transition: all 0.5s; }\n    .workflow-makr-org li.end {\n      float: none;\n      margin: 0 auto; }\n    .workflow-makr-org li::before, .workflow-makr-org li::after {\n      content: '';\n      position: absolute;\n      top: 0;\n      right: 50%;\n      border-top: 1px solid #ccc;\n      width: 50%;\n      height: 19px; }\n    .workflow-makr-org li::after {\n      right: auto;\n      left: 50%;\n      border-left: 1px solid #ccc; }\n    .workflow-makr-org li:only-child::after, .workflow-makr-org li:only-child::before {\n      border-radius: 0 !important;\n      right: calc(50% - 1px); }\n    .workflow-makr-org li:first-child::before, .workflow-makr-org li:last-child::after {\n      border: 0 none; }\n    .workflow-makr-org li:last-child::before {\n      border-right: 1px solid #ccc;\n      border-radius: 0 6px 0 0; }\n    .workflow-makr-org li:first-child::after {\n      border-radius: 6px 0 0 0; }\n    .workflow-makr-org li .node {\n      text-decoration: none;\n      color: #666;\n      display: inline-block;\n      padding: 20px 10px;\n      transition: all 0.5s;\n      background: #fff;\n      min-width: 180px;\n      border-radius: 6px;\n      position: relative;\n      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24); }\n      .workflow-makr-org li .node.start, .workflow-makr-org li .node.end {\n        width: 50px;\n        min-width: 50px;\n        height: 50px;\n        border-radius: 50%;\n        padding: 0;\n        background: #cecece;\n        line-height: 50px;\n        font-size: 10px;\n        font-weight: 900;\n        letter-spacing: 1px;\n        color: #333;\n        position: relative; }\n      .workflow-makr-org li .node.end {\n        background: #22659c;\n        color: #fff; }\n      .workflow-makr-org li .node:not(.start):not(.end):hover {\n        background: #dfecf8;\n        color: #002A50;\n        transition: all 0.15s; }\n      .workflow-makr-org li .node:not(.start):not(.end):hover + ul li::after,\n      .workflow-makr-org li .node:not(.start):not(.end):hover + ul li::before,\n      .workflow-makr-org li .node:not(.start):not(.end):hover + ul::before,\n      .workflow-makr-org li .node:not(.start):not(.end):hover + ul ul::before {\n        border-color: #94a0b4; }\n      .workflow-makr-org li .node:hover .add-btn,\n      .workflow-makr-org li .node:hover .edit-btn {\n        opacity: .9; }\n      .workflow-makr-org li .node > div,\n      .workflow-makr-org li .node > a {\n        font-size: 12px; }\n      .workflow-makr-org li .node .status {\n        font-size: 18px;\n        float: none;\n        margin: 0 auto; }\n      .workflow-makr-org li .node .action {\n        font-weight: 700;\n        font-size: 13px;\n        color: #22659c;\n        text-transform: uppercase;\n        position: absolute;\n        top: -15px;\n        font-size: 10px;\n        right: calc(50% - 45px);\n        width: 100%;\n        text-align: center;\n        background: #efefef;\n        padding: 0;\n        z-index: 2; }\n      .workflow-makr-org li .node .add-btn,\n      .workflow-makr-org li .node .edit-btn {\n        cursor: pointer;\n        text-decoration: none;\n        position: absolute;\n        z-index: 2;\n        opacity: 0;\n        transition: opacity 0.2s ease-in-out; }\n      .workflow-makr-org li .node .add-btn {\n        bottom: -22px;\n        right: calc(50% - 8.5px); }\n      .workflow-makr-org li .node .edit-btn {\n        top: 3px;\n        right: 3px; }\n      .workflow-makr-org li .node.start .add-btn {\n        bottom: -39px; }\n      .workflow-makr-org li .node .status,\n      .workflow-makr-org li .node .action {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        max-width: 15ch; }\n  .workflow-makr-org > ul > li:before {\n    border: 0 none !important; }\n\n#loading-workflow-makr {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  height: 100%;\n  width: 100%;\n  min-width: 1200px;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  background-color: #22659c;\n  transition: opacity 0.45s ease-in-out;\n  z-index: 999; }\n  #loading-workflow-makr .loader {\n    height: 32px;\n    width: 32px;\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    margin: auto; }\n  #loading-workflow-makr .loader span {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    margin: auto;\n    height: 32px;\n    width: 32px; }\n  #loading-workflow-makr .loader span::before {\n    content: \"\";\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    margin: auto;\n    height: 32px;\n    width: 32px;\n    border: 3px solid #FFF;\n    border-bottom: 3px solid transparent;\n    border-radius: 50%;\n    -webkit-animation: loader-1 1.5s cubic-bezier(0.77, 0, 0.175, 1) infinite;\n    animation: loader-1 1.5s cubic-bezier(0.77, 0, 0.175, 1) infinite; }\n  #loading-workflow-makr .loader span::after {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 5px;\n    bottom: 0;\n    right: 0;\n    margin: auto;\n    width: 6px;\n    height: 6px;\n    background: #FFF;\n    border-radius: 50%;\n    -webkit-animation: loader-2 1.5s cubic-bezier(0.77, 0, 0.175, 1) infinite;\n    animation: loader-2 1.5s cubic-bezier(0.77, 0, 0.175, 1) infinite; }\n\n@-webkit-keyframes loader-1 {\n  0% {\n    -webkit-transform: rotate(0deg); }\n  40% {\n    -webkit-transform: rotate(180deg); }\n  60% {\n    -webkit-transform: rotate(180deg); }\n  100% {\n    -webkit-transform: rotate(360deg); } }\n\n@keyframes loader-1 {\n  0% {\n    transform: rotate(0deg); }\n  40% {\n    transform: rotate(180deg); }\n  60% {\n    transform: rotate(180deg); }\n  100% {\n    transform: rotate(360deg); } }\n\n@-webkit-keyframes loader-2 {\n  0% {\n    -webkit-transform: translate3d(0, -32px, 0) scale(0, 2);\n    opacity: 0; }\n  50% {\n    -webkit-transform: translate3d(0, 0, 0) scale(1.25, 1.25);\n    opacity: 1; }\n  100% {\n    -webkit-transform: translate3d(0, 8px, 0) scale(0, 0);\n    opacity: 0; } }\n\n@keyframes loader-2 {\n  0% {\n    transform: translate3d(0, -32px, 0) scale(0, 2);\n    opacity: 0; }\n  50% {\n    transform: translate3d(0, 0, 0) scale(1.25, 1.25);\n    opacity: 1; }\n  100% {\n    transform: translate3d(0, 8px, 0) scale(0, 0);\n    opacity: 0; } }\n\n@keyframes fadeInUp {\n  from {\n    transform: translate3d(0, -40px, 0); }\n  to {\n    transform: translate3d(0, 0, 0);\n    opacity: 1; } }\n\n@-webkit-keyframes fadeInUp {\n  from {\n    transform: translate3d(0, -40px, 0); }\n  to {\n    transform: translate3d(0, 0, 0);\n    opacity: 1; } }\n",{});const e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB9ElEQVQ4jaWSO2hTYRzFz3dThz6GEiyIaIgSb4IUoUOpGEI6pU2Mdqxg3SwU8bFYx+CgiyBiFmnRQeGGZmhpBRMfZLBDljwoWAht77WpEEQlUVDz7j0OljxKykU84/nO9+N//t8H/KdER/fYmBl9pnHowg4AkLiBn5U3yMXyRkAJdt/M2NXA73BklRlthxlth+HIKsen7/6CwzsNQDrwcv/I5PJc+DV1XSdJJpNJJhIJkqSu65xbiLL/7ORiZ4jdNxN88ZKtCoVCVBSlzXv8fIV7k+yNDAA214B7ZOjh9Sm/UUXcuHIB7uGhR5BHDzcBh/q8U35XjxCdd9oqIQQu+129MPV4AaALAKCbTp22WZBOpxGPxxvhVCoFkigUCg3P6XTCcfI4oEtyEwCKWr2OowNmyLLcCOdyOQBo88xmM75//gGAogkQVNcy23APX4TVam2E8/k8SMLj8bTVWH6/Bkhis7mDWj3ybClWqlRrhjsoV6p4uviuiNputAnQ3n79sPHxTiCoGAICQQXrW9nbUKPf9p9JXWcmVm7dn2exVCZJappGVVVJksVSmTfvzdM0OLGElo+0/90kOPzX5BOWB5d857oHbRYAwLr6CQuReGkzm51FJvIEgH4Q4K+so0fQ3XseFDYAAHe3UK2+wnbsi2HHf9UfUvbrs4JlrH0AAAAASUVORK5CYII=";let r={};const i={add:"Add transition",edit:"Edit transition"};function a(n){const o=[];return n.forEach((n=>{o.push({id:n.id,old_status:n.old_status,new_status:n.new_status,action:n.action,predecessor:n.predecessor_id,transitions:a(n.children)})})),o}function l(n){let o="";return o+="<li>",o+='<div class="node">',o+='<a data-transition-id="'+n.id+'" class="edit-btn" title="'+i.edit+'"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAABoUlEQVQ4jY2TMU8UURDHfzPLhguVFtiCwWZ36fgCJp6xutu3ja0WgNRHArGyNFdwlooQ4wcgYQ8qEv0IdtxRkUCNNdEcu2Nxx3m3t2v8Vy/z5jcz703+QlFhI0K8DYwlIBtFPYRrLDugf9qbTJfxaW3T5/amjdo8Qofz9HKq8KpbwWiRy28WFnf58XnAFBy6I0L3bGaiooK4TuiOWNv0AeYAuL1pI3ykn36vBKP4BTkNcnuLjhhoKWEjQm3+33CzCfIOkceovOei+w21GmEjUsTbQOhUwmESY5qA/xTjAcopAMIe4q0rxtLMh43f6xyYQ/w32N0nNG/T654BcJ5eYiwrf1c1CwvxGJYspXdyUsjK5srhOEFoDuHBPpIfl8DAcAveNJw8R/OX4L/CBvsgZZ3v5SnCNatuZRwSe43JQ/LBV4wu/eNuKRo1nyBcKZYdYLQmr8B+gn3hIk0rOgPawrLDEeI+EMT16uSCgrhOkHQAFIDaox1Etv6rSBDXEdliYXEXys1UQ9irMNM2ufyaNJNQ1NDO6xjLTNv5CssOi3b+AzI6mWmKNVc3AAAAAElFTkSuQmCC" /></a>',o+='<div class="action" '+(n.action.designation.length>15?'title = "'+n.action.designation+'"':"")+">"+n.action.designation+"</div>",o+='<div class="status" '+(n.new_status.designation.length>15?'title = "'+n.new_status.designation+'"':"")+">"+n.new_status.designation+"</div>",o+='<a data-transition-id="'+n.id+'" class="add-btn" title="'+i.add+'"><img src="'+e+'" /></a>',o+="</div>",n.transitions&&n.transitions.length?(o+="<ul>",n.transitions.forEach((n=>{o+=l(n)})),o+="</ul>"):function(n){return!s(r.transitions).filter((o=>o==n.new_status.id)).length}(n)&&(o+="<ul>",o+='<li class="end"><div class="node end">END</div></li>',o+="</ul>"),o+="</li>",o}function s(n){let o=[];return n.forEach((n=>{n.old_status&&o.push(n.old_status.id),n.children&&n.children.length&&(o=o.concat(s(n.children)))})),o}n.init=function(n,o){document.querySelector(n).innerHTML='<div id="workflow-makr-chart-container"></div>',document.querySelector("#workflow-makr-chart-container").innerHTML='<div id="loading-workflow-makr"><div class="loader"><span></span></div></div>',console.log("Initializing the workflow makr ui...");var t=new XMLHttpRequest;console.log("Loading scenario..."),t.onreadystatechange=function(){4==this.readyState&&(200==this.status&&(r=JSON.parse(this.responseText),document.querySelector("#workflow-makr-chart-container #loading-workflow-makr").style.opacity=0,setTimeout((()=>{console.log("Printing scenario..."),function(n){let o="";o+='<div id="workflow-makr-org-container">',o+='<div class="workflow-makr-org">',o+="<ul>",o+="<li>",o+='<div class="node start">',o+="START",o+='<a data-transition-id="null" class="add-btn" title="'+i.add+'"><img src="'+e+'" /></a>',o+="</div>",o+="<ul>",n.forEach((n=>o+=l(n))),o+="</ul>",o+="</li></ul>",o+="</div>",o+="</div>",document.querySelector("#workflow-makr-chart-container").innerHTML=o}(a(r.transitions))}),500)),404==this.status&&(console.error("Failed loading scenario..."),console.error("Error",this.status,this.statusText)))},t.open("GET","http://localhost:8000/workflowmakr/scenarios/"+o,!0),t.send()},Object.defineProperty(n,"__esModule",{value:!0})}));
